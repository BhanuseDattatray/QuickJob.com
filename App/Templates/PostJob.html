{%extends "Home.html" %}

{%block "content" %}

<div class="row justify-content-center">
    <div class="col-5 border p-4 shadow p-3 mb-5 bg-white rounded">
        <center>
            <div class="lable">
                <label for="POST">Post A New Job To Get Right Candidates In Company</label>
                <button class="btn btn-primary ml-3" data-toggle="modal" data-target="#ED" id="POST">Post a Job</button>
        </center>
    </div>
    <!-- The Modal -->
    <div class="modal fade" id="ED">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">

                <!-- Modal Header -->
                <div class="modal-header">
                    <h4 class="modal-title">Job Description</h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>

                <!-- Modal body -->
                <div class="modal-body p-5">
                    <form method="post">
                        {%csrf_token%}
                        <!-- Name input -->
                        <div class="form-outline mb-4">
                            <input type="hidden" name="Company" value="id">
                            <div class="form-row">
                                <div class="form-group col-md-7">
                                    <label for="Role_InCompany">Role</label>
                                    <div class="overflow-auto">
                                        <select class="form-control" onfocus="this.size=6;" onblur="this.size=1;"
                                            onchange="this.size=1;" name="Role" required>
                                            {% for Role in Roles %}
                                            <option>{{Role.Designation}}</option>
                                            {%endfor%}
                                        </select>
                                    </div>
                                </div>

                                <div class="form-group col-md-4">
                                    <label for="inputCity">Department</label>
                                    <div class="overflow-auto">
                                        <select class="form-control" onfocus="this.size=6;" onblur="this.size=1;"
                                            onchange="this.size=1;" name="Department" required>
                                            {% for Department in Departments %}
                                            <option>{{Department.Department}}</option>
                                            {%endfor%}
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group col-md-4">
                                    <label for="Ind_Type">Industry Type</label>
                                    <div class="overflow-auto">
                                        <select class="form-control" onfocus="this.size=6;" onblur="this.size=1;"
                                            onchange="this.size=1;" name="Industry_Type" required id="Ind_Type">
                                            {% for Ind in Industries %}
                                            <option>{{Ind.Industry}}</option>
                                            {%endfor%}
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group col-md-4">
                                    <label for="inputState">Employement Type</label>
                                    <select class="form-control" onfocus="this.size=3;" onblur="this.size=1;"
                                        onchange="this.size=1;" name="Employment_Type" required>
                                        <option>Full-Time</option>
                                        <option>Part-Time</option>
                                        <option>Temporary</option>
                                        <option>Seasonal</option>
                                        <option>Leased</option>
                                    </select>
                                </div>

                                <div class="form-group col-md-3">
                                    <label for="inputState">Education</label>
                                    <div class="overflow-auto">
                                        <select class="form-control" onfocus="this.size=6;" onblur="this.size=1;"
                                            onchange="this.size=1;" name="Education" required>
                                            {% for Courses in Course_Dtel %}
                                            <option>{{Courses.Course}}</option>
                                            {%endfor%}
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group col-md-5">
                                    <label for="inputState">IT Skills</label>
                                    <div class="overflow-auto">
                                        <select multiple class="form-control" onfocus="this.size=6;"
                                            onblur="this.size=1;" onchange="this.size=1;" name="ITSkill" required>
                                            {% for SoftwareName in SoftwaresList %}
                                            <option>{{SoftwareName.Software}}</option>
                                            {%endfor%}
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group col-md-3">
                                    <label for="inputCity">Experince</label>
                                    <div class="overflow-auto">
                                        <select class="form-control" onfocus="this.size=6;" onblur="this.size=1;"
                                            onchange="this.size=1;" name="Experience" required>
                                            {% for Exp in Experience %}
                                            <option>{{Exp.Duration}}</option>
                                            {%endfor%}
                                        </select>
                                    </div>
                                </div>

                                <div class="form-group col-md-3">
                                    <label for="Salary">Salary</label>
                                    <input type="number" name="Salary" required class="form-control"
                                        placeholder="Salary">
                                </div>
                                <div class="form-group col-md-3">
                                    <label for="Ed_Grade">Job Description</label>
                                    <textarea name="Job_Description" id="Desc" cols="100" rows="10"
                                        name="Description"></textarea>
                                </div>
                            </div>
                        </div>
                        <!-- Modal footer -->
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                            <button type="submit" class="btn btn-primary btn">Save</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
{%if JobListing %}
<div class="row justify-content-center">
    {%for Jobs in JobListing %}
    <div class="col-9 shadow p-3 mb-5 bg-white rounded">
        <div class="media p-2 mb-4 ml-3">
            <div class="media-body ml-4">
                <h4>{{Jobs.Role}} <small><i>{{Jobs.Date_Of_Post}}</i></small></h4>
                <div class="d-flex justify-content-start">
                    <div><i class="bi bi-bag"></i>&NonBreakingSpace;{{Jobs.Experience}}</div>
                    <div class="ml-3">&#8377;&NonBreakingSpace;{{Jobs.Salary}}</div>
                    <div class="ml-3"><span class="bi bi-pin-map"></span>&NonBreakingSpace;{{Jobs.Location}}
                    </div>
                </div>
                <div class="d-flex justify-content-start mt-2">
                    <div><i class="bi bi-mortarboard-fill"></i> {{Jobs.Education}}&NonBreakingSpace;</div>
                </div>{{Jobs.id}}
                <div class="d-flex justify-content-start mt-2">
                    <div><i class="bi bi-mortarboard-fill"></i>
                    {% for i in ITSkills %}
                    {% if Jobs.id == i.SkillBelong_ToJob.id %}
                    {{i.ITSkill}}&NonBreakingSpace;
                    {%endif%}
                    {%endfor%}&NonBreakingSpace;</div>
                </div>
                <div class="d-flex justify-content-start mt-2">
                    <div><i class="bi bi-file-earmark-text">&NonBreakingSpace;</i>{{Jobs.Description}}</div>
                </div>
                <div class="d-flex flex-end justify-content-start">
                    <div class="mt-2"><button class="btn btn-info" href="#Update_JobPOST-{{forloop.counter}}"
                            data-toggle="modal">Edit &NonBreakingSpace; &#9998;
                        </button>
                    </div>
                    <div class="mt-2 ml-3"><button class="btn btn-danger" href="#Delete_JobPOST-{{forloop.counter}}"
                            data-toggle="modal">Delete
                            &NonBreakingSpace; &#9998;
                        </button>
                    </div>
                    <div class="mt-2 ml-3"><button class="btn btn-success" href="#Filled_JobPOST-{{forloop.counter}}"
                            data-toggle="modal">Vacancy Filled
                        </button>
                    </div>
                    <div class="mt-2 ml-auto">
                        <a href="/Applied_frJobs/{{Jobs.id}}" class="btn btn-info" role="button">View Status</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {%endfor%}
    {%else%}
    <center>
        <div class="mb-4">
            <span class="bg-primary p-3">No Job Posted Yet</span>
        </div>
    </center>
    {%endif%}
</div>

<!--For Update Job Listing as per modal id-->
{%for Jobs in JobListing %}
<div class="modal fade" id="Update_JobPOST-{{forloop.counter}}">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <!-- Modal Header -->
            <div class="modal-header">
                <h4 class="modal-title">Job Description</h4>
                <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            <!-- Modal body -->
            <div class="modal-body p-5">
                <form method="post" action="/UpdateJobListing/{{Jobs.id}}">
                    {%csrf_token%}
                    <!-- Name input -->
                    <div class="form-outline mb-4">
                        <div class="form-row">
                            <div class="form-group col-md-7">
                                <label for="Role_InCompany">Role</label>
                                <div class="overflow-auto">
                                    <select class="form-control" onfocus="this.size=6;" onblur="this.size=1;"
                                        onchange="this.size=1;" name="Role" required>
                                        {% for Role in Roles %}
                                        <option>{{Role.Designation}}</option>
                                        {%endfor%}
                                    </select>
                                </div>
                            </div>

                            <div class="form-group col-md-4">
                                <label for="inputCity">Department</label>
                                <div class="overflow-auto">
                                    <select class="form-control" onfocus="this.size=6;" onblur="this.size=1;"
                                        onchange="this.size=1;" name="Department" required>
                                        {% for Department in Departments %}
                                        <option>{{Department.Department}}</option>
                                        {%endfor%}
                                    </select>
                                </div>
                            </div>
                            <div class="form-group col-md-4">
                                <label for="Ind_Type">Industry Type</label>
                                <div class="overflow-auto">
                                    <select class="form-control" onfocus="this.size=6;" onblur="this.size=1;"
                                        onchange="this.size=1;" name="Industry_Type" required id="Ind_Type">
                                        {% for Ind in Industries %}
                                        <option>{{Ind.Industry}}</option>
                                        {%endfor%}
                                    </select>
                                </div>
                            </div>
                            <div class="form-group col-md-4">
                                <label for="inputState">Employement Type</label>
                                <select class="form-control" onfocus="this.size=3;" onblur="this.size=1;"
                                    onchange="this.size=1;" name="Employment_Type" required>
                                    <option>Full-Time</option>
                                    <option>Part-Time</option>
                                    <option>Temporary</option>
                                    <option>Seasonal</option>
                                    <option>Leased</option>
                                </select>
                            </div>

                            <div class="form-group col-md-3">
                                <label for="inputState">Education</label>
                                <div class="overflow-auto">
                                    <select class="form-control" onfocus="this.size=6;" onblur="this.size=1;"
                                        onchange="this.size=1;" name="Education" required>
                                        {% for Courses in Course_Dtel %}
                                        <option>{{Courses.Course}}</option>
                                        {%endfor%}
                                    </select>
                                </div>
                            </div>
                            <div class="form-group col-md-5">
                                <label for="inputState">IT Skills</label>
                                <div class="overflow-auto">
                                    <select multiple class="form-control" onfocus="this.size=6;" onblur="this.size=1;"
                                        onchange="this.size=1;" name="ITSkill" required>
                                        {% for SoftwareName in SoftwaresList %}
                                        <option>{{SoftwareName.Software}}</option>
                                        {%endfor%}
                                    </select>
                                </div>
                            </div>
                            <div class="form-group col-md-3">
                                <label for="inputCity">Experince</label>
                                <div class="overflow-auto">
                                    <select class="form-control" onfocus="this.size=6;" onblur="this.size=1;"
                                        onchange="this.size=1;" name="Experience" required>
                                        {% for Exp in Experience %}
                                        <option value="{{Jobs.Experience}}">{{Exp.Duration}}</option>
                                        {%endfor%}
                                    </select>
                                </div>
                            </div>

                            <div class="form-group col-md-3">
                                <label for="Salary">Salary</label>
                                <input type="number" name="Salary" required class="form-control" placeholder="Salary"
                                    value="{{Jobs.Salary}}">
                            </div>
                            <div class="form-group col-md-3">
                                <label for="Ed_Grade">Job Description</label>
                                <textarea name="Job_Description" id="Desc" cols="100" rows="10" name="Description"
                                    required>{{Jobs.Description}}</textarea>
                            </div>
                        </div>
                    </div>
                    <!-- Modal footer -->
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <button type="submit" class="btn btn-primary btn">Save</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

{%for Jobs in JobListing %}
<div class="modal fade" id="Delete_JobPOST-{{forloop.counter}}">
    <div class="modal-dialog">
        <div class="modal-content">
            <form action="DeleteJobListing/{{Jobs.id}}" method="post">
                {%csrf_token%}
                <div class="modal-header">
                    <h4 class="modal-title">Delete Job Post</h4>
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                </div>
                <div class="modal-body">
                    <p>Are you sure you want to delete this Post?</p>
                    <p class="text-warning"><small>This action cannot be undone.</small></p>
                </div>
                <div class="modal-footer">
                    <input type="button" class="btn btn-default" data-dismiss="modal" value="Cancel">
                    <input type="submit" class="btn btn-danger" value="Delete">
                </div>
            </form>
        </div>
    </div>
</div>
{%endfor%}

{%endfor%}

{%endblock%}